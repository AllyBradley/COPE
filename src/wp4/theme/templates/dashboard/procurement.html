{% extends "base_site.html" %}
{% load l10n i18n %}
{% load crispy_forms_tags %}

{% block page_title %}Procurement{% endblock %}
{% block page_header %}Procurement - Case: {{ donor.trial_id }}{% endblock %}

{% block content %}
<!--<p>Procurement form goes here.</p>-->
<!--<p>Eligibility Dashboard - i.e. the three ticks for inclusion in trial</p>-->
<form method="post" action="{% url 'compare:procurement-detail' pk=donor.id %}" class="form-horizontal">
<div role="tabpanel" class="container">
    <!-- Nav tabs -->
    <ul class="nav nav-tabs nav-justified" role="tablist">
        <li role="presentation" class="active"><a href="#dashboard" aria-controls="dashboard" role="tab"
                                                  data-toggle="tab">Dashboard</a></li>
        <li role="presentation"><a href="#donor" aria-controls="donor" role="tab" data-toggle="tab">Donor
            {% if donor_form.errors|length > 0 %}
             <span class="label label-danger">{{ donor_form.errors|length }}</span>
            {% endif %}</a>
        </li>
        <li role="presentation">
            <a href="#leftkidney" aria-controls="leftkidney" role="tab" data-toggle="tab">Left Kidney
            {% if left_organ_form.errors|length > 0 %}
             <span class="label label-danger">{{ left_organ_form.errors|length }}</span>
            {% endif %}</a>
        </li>
        <li role="presentation">
            <a href="#rightkidney" aria-controls="rightkidney" role="tab" data-toggle="tab">Right Kidney
            {% if right_organ_form.errors|length > 0 %}
             <span class="label label-danger">{{ right_organ_form.errors|length }}</span>
            {% endif %}</a>
        </li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="dashboard">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Donor</h3>
                </div>
                <div class="panel-body">
                    <dl>
                        <dt>Age:</dt>
                        <dd>{{ donor.age }}</dd>
                        <dt>NHS Number:</dt>
                        <dd>{{ donor.number }}</dd>
                        <dt>Donor hospital:</dt>
                        <dd>{{ donor.retrieval_hospital.name }}</dd>
                        <dt>Transplant co-ordinator:</dt>
                        <dd>{{ donor.transplant_coordinator.full_name }} via {{ donor.transplant_coordinator.telephone }}</dd>
                    </dl>
                </div>
            </div>
            <div class="row">
                <div class=" col-md-6">
                    <div class="panel panel-success">
                        <div class="panel-heading">
                            <h3 class="panel-title">Left Kidney</h3>
                        </div>
                        <div class="panel-body">
                            <p>Organ ID: {{ donor.left_kidney.trial_id }}</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h3 class="panel-title">Right Kidney</h3>
                        </div>
                        <div class="panel-body">
                            <p>Organ ID: {{ donor.right_kidney.trial_id }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div role="tabpanel" class="tab-pane" id="donor">
{#            {% bootstrap_form donor_form layout='horizontal' %}#}
            {% crispy donor_form %}
        </div>


        <div role="tabpanel" class="tab-pane" id="leftkidney">
{#            {% bootstrap_form left_organ_form layout='horizontal' %}#}
            {% crispy left_organ_form %}
        </div>


        <div role="tabpanel" class="tab-pane" id="rightkidney">
{#            {% bootstrap_form right_organ_form layout='horizontal' %}#}
            {% crispy right_organ_form %}
        </div>
    </div>

</div>
<hr>
{% csrf_token %}
<p class="btn-group btn-group-lg">
    <input type="submit" class="btn btn-primary" value="Save" />
    <input type="submit" class="btn btn-default" value="Validate" />
</p>
</form>
<!--<ol>-->
    <!--<li>Layout basic UI and form elements</li>-->
    <!--<li>Tie in the form data</li>-->
    <!--<li>Add the pickers/side data lists</li>-->
    <!--<li>Build the save process</li>-->
    <!--<li>Validation process</li>-->
<!--</ol>-->
{% endblock %}
